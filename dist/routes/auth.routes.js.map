{"version":3,"file":"auth.routes.js","names":["multer","require","storage","diskStorage","destination","req","file","cb","filename","uniqueSuffix","Date","now","Math","round","random","body","profile_pic","originalname","upload","authRouter","express","Router","post","celebrate","Segments","BODY","loginSchema","login","single","registerSchema","register"],"sources":["../../src/routes/auth.routes.js"],"sourcesContent":["import express from 'express';\r\nimport { login, register } from '../controllers/auth';\r\nimport { celebrate, Segments } from 'celebrate'\r\n\r\n\r\nimport { registerSchema, loginSchema } from '../validations/user';\r\nconst multer = require('multer')\r\n\r\n\r\nconst storage = multer.diskStorage({\r\n    destination: function (req, file, cb) {\r\n        cb(null, './public')\r\n    },\r\n    filename: function (req, file, cb) {\r\n        const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9)\r\n        req.body.profile_pic = uniqueSuffix + file.originalname\r\n        cb(null, uniqueSuffix + file.originalname)\r\n    }\r\n})\r\n\r\nconst upload = multer({ storage: storage })\r\n\r\nconst authRouter = express.Router();\r\n\r\nauthRouter.post('/login', celebrate({ [Segments.BODY]: loginSchema }), login);\r\nauthRouter.post('/register', upload.single('profile_pic'), celebrate({ [Segments.BODY]: registerSchema }), register);\r\n\r\nexport default authRouter;"],"mappings":";;;;;;AAAA;AACA;AACA;AAGA;AAAkE;AAAA;AAAA;AAAA;AAAA;AAClE,IAAMA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAGhC,IAAMC,OAAO,GAAGF,MAAM,CAACG,WAAW,CAAC;EAC/BC,WAAW,EAAE,qBAAUC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IAClCA,EAAE,CAAC,IAAI,EAAE,UAAU,CAAC;EACxB,CAAC;EACDC,QAAQ,EAAE,kBAAUH,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IAC/B,IAAME,YAAY,GAAGC,IAAI,CAACC,GAAG,EAAE,GAAG,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,GAAG,CAAC;IACvET,GAAG,CAACU,IAAI,CAACC,WAAW,GAAGP,YAAY,GAAGH,IAAI,CAACW,YAAY;IACvDV,EAAE,CAAC,IAAI,EAAEE,YAAY,GAAGH,IAAI,CAACW,YAAY,CAAC;EAC9C;AACJ,CAAC,CAAC;AAEF,IAAMC,MAAM,GAAGlB,MAAM,CAAC;EAAEE,OAAO,EAAEA;AAAQ,CAAC,CAAC;AAE3C,IAAMiB,UAAU,GAAGC,mBAAO,CAACC,MAAM,EAAE;AAEnCF,UAAU,CAACG,IAAI,CAAC,QAAQ,EAAE,IAAAC,qBAAS,sBAAIC,oBAAQ,CAACC,IAAI,EAAGC,iBAAW,EAAG,EAAEC,WAAK,CAAC;AAC7ER,UAAU,CAACG,IAAI,CAAC,WAAW,EAAEJ,MAAM,CAACU,MAAM,CAAC,aAAa,CAAC,EAAE,IAAAL,qBAAS,sBAAIC,oBAAQ,CAACC,IAAI,EAAGI,oBAAc,EAAG,EAAEC,cAAQ,CAAC;AAAC,eAEtGX,UAAU;AAAA"}