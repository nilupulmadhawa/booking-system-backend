{"version":3,"file":"user.js","names":["getAll","asyncHandler","req","res","getUsers","query","users","makeResponse","status","data","message","getById","getUserByID","params","id","ret","update","updateUserdetails","user","_id","body","is_admin","result","remove","deleteById","changePassword","changePasswordService","old_password","new_password"],"sources":["../../src/controllers/user.js"],"sourcesContent":["import asyncHandler from '../middleware/async'\r\nimport { makeResponse } from '../utils/response'\r\nimport { getUsers, getUserByID, updateUserdetails, deleteById, changePasswordService } from '../services/user'\r\n\r\n\r\nexport const getAll = asyncHandler(async (req, res) => {\r\n    try {\r\n        const users = await getUsers(req.query)\r\n        return makeResponse({ res, status: 200, data: users, message: 'Users retrieved succesfully' })\r\n    } catch (error) {\r\n        return makeResponse({ res, status: 500, message: error.message });\r\n    }\r\n})\r\n\r\nexport const getById = asyncHandler(async (req, res) => {\r\n    try {\r\n        const ret = await getUserByID(req.params.id)\r\n        if (ret.status) return makeResponse({ res, ...ret })\r\n        return makeResponse({ res, status: 200, data: ret, message: 'User retrieved succesfully' })\r\n    } catch (error) {\r\n        return makeResponse({ res, status: 500, message: error.message });\r\n    }\r\n})\r\n\r\nexport const update = asyncHandler(async (req, res) => {\r\n    try {\r\n        const result = await updateUserdetails(req.user._id, req.body, req.user.is_admin)\r\n        if (!result) return makeResponse({ res, status: 500, message: 'Failed to update user' })\r\n        if (result.status) return makeResponse({ res, ...result })\r\n        return makeResponse({ res, status: 200, data: result, message: 'User updated successfully' })\r\n    } catch (error) {\r\n        return makeResponse({ res, status: 500, message: error.message });\r\n    }\r\n})\r\n\r\nexport const remove = asyncHandler(async (req, res) => {\r\n    try {\r\n        const result = await deleteById(req.user._id)\r\n        if (!result) return makeResponse({ res, status: 500, message: 'Failed to delete user' })\r\n        if (result.status) return makeResponse({ res, ...result })\r\n        return makeResponse({ res, status: 200, data: result, message: 'User deleted successfully' })\r\n    } catch (error) {\r\n        return makeResponse({ res, status: 500, message: error.message });\r\n    }\r\n})\r\n\r\nexport const changePassword = asyncHandler(async (req, res) => {\r\n    try {\r\n        const result = await changePasswordService(req.user, req.body.old_password, req.body.new_password)\r\n        if (!result) return makeResponse({ res, status: 500, message: 'Failed to change password' })\r\n        if (result.status) return makeResponse({ res, ...result })\r\n        return makeResponse({ res, message: 'Password changed successfully' })\r\n    } catch (error) {\r\n        return makeResponse({ res, status: 500, message: error.message });\r\n    }\r\n})\r\n\r\n"],"mappings":"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"}