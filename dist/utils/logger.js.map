{"version":3,"file":"logger.js","names":["stacktrace","winston","format","info","Error","Object","assign","stack","message","logger","createLogger","combine","timestamp","json","transports","File","filename","Date","toISOString","slice","level","process","env","NODE_ENV","add","Console"],"sources":["../../src/utils/logger.js"],"sourcesContent":["import winston from \"winston\"\r\n\r\nconst stacktrace = winston.format((info) => {\r\n  if (info instanceof Error) {\r\n    return Object.assign({}, info, {\r\n      stack: info.stack,\r\n      message: info.message,\r\n    })\r\n  }\r\n  return info\r\n})\r\n\r\nconst logger = winston.createLogger({\r\n  format: winston.format.combine(stacktrace(), winston.format.timestamp(), winston.format.json()),\r\n  transports: [\r\n    new winston.transports.File({\r\n      filename: `logs/error/${new Date().toISOString().slice(0, 10)}.log`,\r\n      level: 'error',\r\n    }),\r\n    new winston.transports.File({\r\n      filename: `logs/info/${new Date().toISOString().slice(0, 10)}.log`,\r\n      level: 'info',\r\n    }),\r\n  ],\r\n})\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n  logger.add(\r\n    new winston.transports.Console({\r\n      format: winston.format.combine(\r\n        stacktrace(),\r\n        winston.format.timestamp(),\r\n        winston.format.json(),\r\n      ),\r\n    }),\r\n  )\r\n}\r\n\r\nexport default logger\r\n"],"mappings":";;;;;;AAAA;AAA6B;AAE7B,IAAMA,UAAU,GAAGC,mBAAO,CAACC,MAAM,CAAC,UAACC,IAAI,EAAK;EAC1C,IAAIA,IAAI,YAAYC,KAAK,EAAE;IACzB,OAAOC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEH,IAAI,EAAE;MAC7BI,KAAK,EAAEJ,IAAI,CAACI,KAAK;MACjBC,OAAO,EAAEL,IAAI,CAACK;IAChB,CAAC,CAAC;EACJ;EACA,OAAOL,IAAI;AACb,CAAC,CAAC;AAEF,IAAMM,MAAM,GAAGR,mBAAO,CAACS,YAAY,CAAC;EAClCR,MAAM,EAAED,mBAAO,CAACC,MAAM,CAACS,OAAO,CAACX,UAAU,EAAE,EAAEC,mBAAO,CAACC,MAAM,CAACU,SAAS,EAAE,EAAEX,mBAAO,CAACC,MAAM,CAACW,IAAI,EAAE,CAAC;EAC/FC,UAAU,EAAE,CACV,IAAIb,mBAAO,CAACa,UAAU,CAACC,IAAI,CAAC;IAC1BC,QAAQ,uBAAgB,IAAIC,IAAI,EAAE,CAACC,WAAW,EAAE,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,SAAM;IACnEC,KAAK,EAAE;EACT,CAAC,CAAC,EACF,IAAInB,mBAAO,CAACa,UAAU,CAACC,IAAI,CAAC;IAC1BC,QAAQ,sBAAe,IAAIC,IAAI,EAAE,CAACC,WAAW,EAAE,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,SAAM;IAClEC,KAAK,EAAE;EACT,CAAC,CAAC;AAEN,CAAC,CAAC;AAEF,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;EACzCd,MAAM,CAACe,GAAG,CACR,IAAIvB,mBAAO,CAACa,UAAU,CAACW,OAAO,CAAC;IAC7BvB,MAAM,EAAED,mBAAO,CAACC,MAAM,CAACS,OAAO,CAC5BX,UAAU,EAAE,EACZC,mBAAO,CAACC,MAAM,CAACU,SAAS,EAAE,EAC1BX,mBAAO,CAACC,MAAM,CAACW,IAAI,EAAE;EAEzB,CAAC,CAAC,CACH;AACH;AAAC,eAEcJ,MAAM;AAAA"}